<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">

  <title>News Articles</title>
  <meta content="" name="description">
  <meta content="" name="keywords">

  <!-- Favicons -->
  <link href="assets/img/favicon.png" rel="icon">
  <link href="assets/img/apple-touch-icon.png" rel="apple-touch-icon">

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,600;1,700&family=Montserrat:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&family=Raleway:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&display=swap" rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="assets/vendor/aos/aos.css" rel="stylesheet">
  <link href="assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">
  <link href="assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">

  <!-- Template Main CSS File -->
  <link href="assets/css/main.css" rel="stylesheet">
  <style>
    /* Adjust card height to make them same size */
    .card {
        height: 100%;
        border-color: #008374;
    }
    .card {
    transition: transform 0.2s ease; /* Add transition property for smoother scaling */
    }

    .card:hover {
    transform: scale(1.008); /* Scale up slightly on hover */
    }
    /* Add overflow-y property to the card deck to make it scrollable */
    .card-deck {
        overflow-y: auto;
        
    }
    .card-footer {
            position: absolute;
            bottom: 0;
            /* width: 90%; */
    }
    /* CSS for the loader */
.loader {
    border: 4px solid #008374;
    border-radius: 50%;
    border-top: 4px solid #e2e9ee;
    width: 30px;
    height: 30px;
    animation: spin 2s linear infinite;
    position: fixed;
    top: 50%;
    left: 50%;
    z-index: 9999;
    display: none; /* Initially hide the loader */
}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

        
</style>
  <!-- =======================================================
  * Template Name: Impact
  * Template URL: https://bootstrapmade.com/impact-bootstrap-business-website-template/
  * Updated: Mar 17 2024 with Bootstrap v5.3.3
  * Author: BootstrapMade.com
  * License: https://bootstrapmade.com/license/
  ======================================================== -->
</head>

<body>

  <!-- ======= Header ======= -->
  <!-- <section id="topbar" class="topbar d-flex align-items-center">
    <div class="container d-flex justify-content-center justify-content-md-between">
      <div class="contact-info d-flex align-items-center">
        <i class="bi bi-envelope d-flex align-items-center"><a href="mailto:contact@example.com">contact@example.com</a></i>
        <i class="bi bi-phone d-flex align-items-center ms-4"><span>+1 5589 55488 55</span></i>
      </div>
      <div class="social-links d-none d-md-flex align-items-center">
        <a href="#" class="twitter"><i class="bi bi-twitter"></i></a>
        <a href="#" class="facebook"><i class="bi bi-facebook"></i></a>
        <a href="#" class="instagram"><i class="bi bi-instagram"></i></a>
        <a href="#" class="linkedin"><i class="bi bi-linkedin"></i></i></a>
      </div>
    </div>
  </section>End Top Bar -->

  <header id="header" class="header d-flex align-items-center">

    <div class="container-fluid container-xl d-flex align-items-center justify-content-between">
      <a href="index.html" class="logo d-flex align-items-center">
        <!-- Uncomment the line below if you also wish to use an image logo -->
        <!-- <img src="assets/img/logo.png" alt=""> -->
        <h1>TurboTrade<span>.</span>Ai</h1>
      </a>
      <nav id="navbar" class="navbar">
        <ul>
          <li><a href="index.html">Home</a></li>
          <li><a href="press_release.html">Press Release</a></li>
          <!-- <li><a href="#services">Services</a></li>
          <li><a href="#portfolio">Portfolio</a></li>
          <li><a href="#team">Team</a></li> -->
          <!-- <li><a href="blog.html">Blog</a></li>
          <li class="dropdown"><a href="#"><span>Drop Down</span> <i class="bi bi-chevron-down dropdown-indicator"></i></a>
            <ul>
              <li><a href="#">Drop Down 1</a></li>
              <li class="dropdown"><a href="#"><span>Deep Drop Down</span> <i class="bi bi-chevron-down dropdown-indicator"></i></a>
                <ul>
                  <li><a href="#">Deep Drop Down 1</a></li>
                  <li><a href="#">Deep Drop Down 2</a></li>
                  <li><a href="#">Deep Drop Down 3</a></li>
                  <li><a href="#">Deep Drop Down 4</a></li>
                  <li><a href="#">Deep Drop Down 5</a></li>
                </ul>
              </li>
              <li><a href="#">Drop Down 2</a></li>
              <li><a href="#">Drop Down 3</a></li>
              <li><a href="#">Drop Down 4</a></li>
            </ul>
          </li> -->
          <li><a href="#contact">Contact</a></li>
        </ul>
      </nav><!-- .navbar -->

      <i class="mobile-nav-toggle mobile-nav-show bi bi-list"></i>
      <i class="mobile-nav-toggle mobile-nav-hide d-none bi bi-x"></i>

    </div>
  </header><!-- End Header -->
  <!-- End Header -->

  <main id="main">

    <!-- ======= Breadcrumbs ======= -->
    <div class="breadcrumbs">
      <div class="page-header d-flex align-items-center" style="background-image: url('');">
        <div class="container position-relative">
          <div class="row d-flex justify-content-center">
            <div class="col-lg-6 text-center">
              <h2>Breaking News</h2>
              <p>Stay informed on all things business with our comprehensive articles page. 
                From startups to Fortune 500 companies, we bring you the latest news and insights 
                to help you make informed decisions.</p>
            </div>
          </div>
        </div>
      </div>
      <!-- <nav>
        <div class="container">
          <ol>
            <li><a href="index.html">Home</a></li>
            <li>News Articles</li>
          </ol>
        </div>
      </nav> -->
      <nav>
        <div class="container d-flex justify-content-between align-items-center">
            <div>
                <ol>
                    <li><a href="index.html">Home</a></li>
                    <li>News Articles</li>
                </ol>
            </div>
            <div>
              <ol>
                <h2 class="text-center">News Articles</h2>
              </ol>
          </div>
            <div id="" class="mb-3">
              <div id="datetime"></div>
            </div>
        </div>
    </nav>
    </div><!-- End Breadcrumbs -->
    <section class="sample-page">
      <div class="container" data-aos="fade-up">
        <div id="news-articles" class="row row-cols-2 position-relative">
          <div class="spinner-grow text-success position-absolute top-50 start-50 translate-middle" id="loader" role="status" style="display: none;">
              <span class="visually-hidden">Loading...</span>
          </div>
          <!-- News Articles will be appended here -->
        </div>
        <nav aria-label="Page navigation">
            <ul id="pagination" class="pagination justify-content-center">
                <!-- Pagination links will be appended here -->
            </ul>
        </nav>
      </div>
    </section>

  </main><!-- End #main -->

  <!-- ======= Footer ======= -->
  <footer id="footer" class="footer">

    <div class="container">
      <div class="row gy-4">
        <div class="col-lg-5 col-md-12 footer-info">
          

      </div>
    </div>

    <div class="container mt-4">
      <div class="copyright">
        <!-- &copy; Copyright <strong><span>Impact</span></strong>. All Rights Reserved -->
      </div>
      <div class="credits">
        <!-- All the links in the footer should remain intact. -->
        <!-- You can delete the links only if you purchased the pro version. -->
        <!-- Licensing information: https://bootstrapmade.com/license/ -->
        <!-- Purchase the pro version with working PHP/AJAX contact form: https://bootstrapmade.com/impact-bootstrap-business-website-template/ -->
        Designed by <a href="#">Rana</a>
      </div>
    </div>

  </footer><!-- End Footer -->
  <!-- End Footer -->

  <a href="#" class="scroll-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>

  <div id="preloader"></div>




  
  <script>
    const cardsPerPage = 10;
    let currentPage = 1;

    async function fetchNewsArticles(page) {
    const loader = document.getElementById('loader');
    if (loader) {
        loader.style.display = 'block';
    }

    try {
        const apiUrl = `http://74.249.29.254/api/news?page=${page}&articles_per_page=${cardsPerPage}`;
        const response = await fetch(apiUrl, {
            method: 'POST',
            headers: {
                'Accept': 'application/json'
            }
        });

        if (!response.ok) {
            throw new Error('Failed to fetch data');
        }

        const data = await response.json();

        if (loader) {
            loader.style.display = 'none';
        }

        return data.articles;
    } catch (error) {
        console.error('Error fetching data:', error);
        if (loader) {
            loader.style.display = 'none';
        }
        throw error; // Rethrow the error to handle it in the calling function
    }
}


    async function displayNewsArticles(page) {
    const loader = document.getElementById('loader');
    if (loader) {
        loader.style.display = 'block';
    }

    try {
        const articles = await fetchNewsArticles(page);
        const articlesContainer = document.getElementById('news-articles');
        articlesContainer.innerHTML = '';

        articles.forEach(article => {
            const articleCard = `
            <div class="col mb-4">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title text-center">${article.title}</h5><hr>
                        <p class="card-text"><small>${article.summary}</small></p>
                        <small class="text-muted text-center"><a href=${article.href} target="_blank">${article.source}</a> | ${article.datetime}</small>
                    </div>
                </div>
            </div>`;
            articlesContainer.innerHTML += articleCard;
        });

        // Hide loader after articles are fetched and displayed
        if (loader) {
            loader.style.display = 'none';
        }
    } catch (error) {
        console.error('Error displaying articles:', error);
        // Hide loader if an error occurs
        if (loader) {
            loader.style.display = 'none';
        }
    }
}



async function displayPagination() {
    const paginationContainer = document.getElementById('pagination');
    paginationContainer.innerHTML = '';

    const totalArticles = await getTotalArticles();
    const totalPages = Math.ceil(totalArticles / cardsPerPage);

    const maxVisiblePages = 5; // Adjust the number of visible pages as needed
    const startPage = Math.max(1, currentPage - Math.floor(maxVisiblePages / 2));
    const endPage = Math.min(totalPages, startPage + maxVisiblePages - 1);

    for (let i = startPage; i <= endPage; i++) {
        const li = document.createElement('li');
        li.classList.add('page-item');
        if (i === currentPage) {
            li.classList.add('active');
        }
        const a = document.createElement('a');
        a.classList.add('page-link');
        a.href = '#';
        a.textContent = i;
        a.onclick = async () => {
            currentPage = i;
            await loadPage(currentPage);
        };
        li.appendChild(a);
        paginationContainer.appendChild(li);
    }

    // Add "Previous" button
    const previousLi = document.createElement('li');
    previousLi.classList.add('page-item');
    const previousLink = document.createElement('a');
    previousLink.classList.add('page-link');
    previousLink.href = '#';
    previousLink.textContent = 'Previous';
    previousLink.onclick = async () => {
        if (currentPage > 1) {
            currentPage--;
            await loadPage(currentPage);
        }
    };
    previousLi.appendChild(previousLink);
    paginationContainer.prepend(previousLi);

    // Add "Next" button
    const nextLi = document.createElement('li');
    nextLi.classList.add('page-item');
    const nextLink = document.createElement('a');
    nextLink.classList.add('page-link');
    nextLink.href = '#';
    nextLink.textContent = 'Next';
    nextLink.onclick = async () => {
        if (currentPage < totalPages) {
            currentPage++;
            await loadPage(currentPage);
        }
    };
    nextLi.appendChild(nextLink);
    paginationContainer.appendChild(nextLi);
}

async function loadPage(page) {
    const loader = document.getElementById('loader');
    if (loader) {
        loader.style.display = 'block';
    }

    try {
        await displayNewsArticles(page);
        highlightCurrentPage();
    } catch (error) {
        console.error('Error loading page:', error);
    } finally {
        if (loader) {
            loader.style.display = 'none';
        }
    }
}



    function highlightCurrentPage() {
        const paginationContainer = document.getElementById('pagination');
        const pageItems = paginationContainer.querySelectorAll('.page-item');
        pageItems.forEach(item => {
            item.classList.remove('active');
            if (item.textContent === currentPage.toString()) {
                item.classList.add('active');
            }
        });
    }

    async function getTotalArticles() {
        const response = await fetch('http://74.249.29.254/api/news?page=1&articles_per_page=10', {
            method: 'POST',
            headers: {
                'Accept': 'application/json'
            }
        });
        const data = await response.json();
        return data.num_pages * cardsPerPage;
    }

    window.onload = async () => {
    await fetchDataAndUpdate(); // Call the function once when the page loads
    setInterval(fetchDataAndUpdate, 15 * 60 * 1000); // Call the function every 15 minutes (in milliseconds)
};

async function fetchDataAndUpdate() {
    await displayNewsArticles(currentPage);
    await displayPagination();
}
</script>








<script>
  // Function to update date and time
  function updateDateTime() {
      // Get current date and time
      var now = new Date();

      // Format date and time
      var formattedDateTime = now.toLocaleString('en-US', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric', hour: 'numeric', minute: 'numeric', second: 'numeric', hour12: true });

      // Display date and time
      document.getElementById("datetime").innerHTML = formattedDateTime + "</p>";
  }

  // Call updateDateTime function initially
  updateDateTime();

  // Update date and time every second
  setInterval(updateDateTime, 1000);
</script>




  <!-- Vendor JS Files -->
  <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="assets/vendor/aos/aos.js"></script>
  <script src="assets/vendor/glightbox/js/glightbox.min.js"></script>
  <script src="assets/vendor/purecounter/purecounter_vanilla.js"></script>
  <script src="assets/vendor/swiper/swiper-bundle.min.js"></script>
  <script src="assets/vendor/isotope-layout/isotope.pkgd.min.js"></script>
  <script src="assets/vendor/php-email-form/validate.js"></script>

  <!-- Template Main JS File -->
  <script src="assets/js/main.js"></script>

</body>

</html>